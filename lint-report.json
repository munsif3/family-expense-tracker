[{"filePath":"D:\\projects\\family-expense-tracker\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\budget\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\calendar\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\goals\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1764,1767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1764,1767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\reports\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\savings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\settings\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3916,3919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3916,3919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\subscriptions\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\transactions\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\trips\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\trips\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\(main)\\vault\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\app\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\layout\\MobileHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\layout\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\date-picker-calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\auth\\AuthContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\budget\\budgetUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\budget\\useBudget.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\calendar\\useCalendarData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\dashboard\\CashflowChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\dashboard\\CategoryPieChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\dashboard\\TrendChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\dashboard\\useDashboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\dashboard\\useDashboardMetrics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\goals\\AddGoalModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\goals\\GoalCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\goals\\useGoalForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\goals\\useGoals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\insights\\InsightsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\insights\\useFinancialInsights.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[955,958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[955,958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[998,1001],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[998,1001],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\onboarding\\OnboardingFlow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\onboarding\\useOnboarding.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\planning\\components\\FeasibilityView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\planning\\components\\FinancialProfileForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\planning\\engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\planning\\useFinancialProfile.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\projects\\family-expense-tracker\\src\\features\\planning\\useFinancialProfile.ts:18:13\n  16 |         if (!householdId) {\n  17 |             // eslint-disable-next-line react-hooks/set-state-in-effect\n> 18 |             setLoading(false);\n     |             ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  19 |             return;\n  20 |         }\n  21 |","line":18,"column":13,"nodeType":null,"endLine":18,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\recurring\\useRecurringProcessor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\reports\\MonthlyStatement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\reports\\useMonthlyStatement.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\projects\\family-expense-tracker\\src\\features\\reports\\useMonthlyStatement.ts:32:9\n  30 |\n  31 |         // eslint-disable-next-line react-hooks/set-state-in-effect\n> 32 |         setLoading(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  33 |\n  34 |         const startDate = startOfMonth(new Date(year, month));\n  35 |         const endDate = endOfMonth(new Date(year, month));","line":32,"column":9,"nodeType":null,"endLine":32,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\savings\\AddAssetModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2778,2781],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2778,2781],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\savings\\assetSchemas.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2792,2795],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2792,2795],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3790,3793],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3790,3793],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\savings\\useAddAsset.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4250,4253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4250,4253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[777,780],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[777,780],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2216,2219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2216,2219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4493,4496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4493,4496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4509,4512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4509,4512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":138,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6244,6247],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6244,6247],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6408,6411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6408,6411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport * as z from 'zod';\r\nimport { useAuth } from '@/features/auth/AuthContext';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { Asset, UserProfile } from '@/types';\r\nimport { assetService } from '@/lib/api/assets';\r\nimport { getAssetSchema, baseAssetSchema, ASSET_META_SCHEMAS } from './assetSchemas';\r\nimport { ASSET_TYPES } from '@/lib/constants';\r\n\r\n// We use a loose type for the form to accommodate dynamic fields\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ntype AssetFormValues = z.infer<typeof baseAssetSchema> & Record<string, any>;\r\n\r\nexport function useAddAsset(\r\n    assetToEdit?: Asset,\r\n    open?: boolean,\r\n    setOpen?: (open: boolean) => void\r\n) {\r\n    const { user, profile, household } = useAuth();\r\n    const [loading, setLoading] = useState(false);\r\n    const [members, setMembers] = useState<UserProfile[]>([]);\r\n\r\n    useEffect(() => {\r\n        const fetchMembers = async () => {\r\n            if (profile?.householdId) {\r\n                try {\r\n                    const q = query(collection(db, 'users'), where('householdId', '==', profile.householdId));\r\n                    const snapshot = await getDocs(q);\r\n                    const fetchedMembers = snapshot.docs.map(d => d.data() as UserProfile);\r\n                    setMembers(fetchedMembers);\r\n                } catch (err) {\r\n                    console.error(\"Error fetching members\", err);\r\n                }\r\n            }\r\n        };\r\n        fetchMembers();\r\n    }, [profile?.householdId]);\r\n\r\n    const form = useForm<AssetFormValues>({\r\n        // Dynamic resolver: decides schema based on 'type' field\r\n        // @ts-expect-error: async resolver type mismatch with loose form values\r\n        resolver: async (values, context, options) => {\r\n            const type = values.type || 'FD';\r\n            const schema = getAssetSchema(type);\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            return zodResolver(schema)(values, context, options as any);\r\n        },\r\n        defaultValues: {\r\n            type: 'FD',\r\n            buyDate: new Date().toISOString().split('T')[0],\r\n            ownerIds: [],\r\n        },\r\n    });\r\n\r\n    // Populate form on edit or reset on open\r\n    useEffect(() => {\r\n        if (assetToEdit) {\r\n            const baseValues = {\r\n                name: assetToEdit.name,\r\n                type: assetToEdit.type,\r\n                amountInvested: assetToEdit.amountInvested.toString(),\r\n                currentValue: (assetToEdit.currentValue || assetToEdit.amountInvested).toString(),\r\n                buyDate: assetToEdit.buyDate.toDate().toISOString().split('T')[0],\r\n                source: assetToEdit.source || '',\r\n                ownerIds: assetToEdit.ownerIds && assetToEdit.ownerIds.length > 0\r\n                    ? assetToEdit.ownerIds\r\n                    : [assetToEdit.ownerUserId]\r\n            };\r\n            // Merge meta fields into the top level for the form\r\n            const merged = { ...baseValues, ...(assetToEdit.meta || {}) };\r\n            form.reset(merged);\r\n        } else if (open && user) {\r\n            form.reset({\r\n                type: 'FD',\r\n                buyDate: new Date().toISOString().split('T')[0],\r\n                name: '',\r\n                amountInvested: '',\r\n                currentValue: '',\r\n                source: '',\r\n                ownerIds: [user.uid],\r\n                // Clear potential old dynamic fields\r\n            });\r\n        }\r\n    }, [assetToEdit, open, user, form]);\r\n\r\n    const submitAsset = async (data: AssetFormValues) => {\r\n        if (!user || !profile?.householdId) return;\r\n        setLoading(true);\r\n\r\n        try {\r\n            const invested = parseFloat(data.amountInvested);\r\n            const current = data.currentValue ? parseFloat(data.currentValue) : invested;\r\n\r\n            // Extract standard fields\r\n            const standardKeys = Object.keys(baseAssetSchema.shape);\r\n            // Dynamic fields are everything else\r\n            const meta: Record<string, any> = {};\r\n\r\n            // Explicitly add foreign currency fields to meta\r\n            if (data.isForeignCurrency) {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                const meta: Record<string, any> = (data as any).meta || {};\r\n                meta.isForeignCurrency = data.isForeignCurrency;\r\n                meta.originalCurrency = data.originalCurrency;\r\n                meta.originalAmount = data.originalAmount;\r\n                meta.exchangeRate = data.exchangeRate;\r\n            }\r\n\r\n            Object.keys(data).forEach(key => {\r\n                // We exclude foreign fields from automatic extraction if they are already handled or if we want them in meta \r\n                // but since they are in baseSchema, they are 'standard'. \r\n                // We want to force them into meta.\r\n                const isForeignField = ['isForeignCurrency', 'originalCurrency', 'originalAmount', 'exchangeRate'].includes(key);\r\n                if (!standardKeys.includes(key) && !isForeignField) {\r\n                    meta[key] = data[key];\r\n                }\r\n            });\r\n\r\n            const payload = {\r\n                name: data.name,\r\n                type: data.type,\r\n                amountInvested: invested,\r\n                currentValue: current,\r\n                buyDate: new Date(data.buyDate),\r\n                source: data.source,\r\n                ownerIds: data.ownerIds,\r\n                meta: meta, // Save dynamic fields here\r\n            };\r\n\r\n            if (assetToEdit) {\r\n                // We need to extend the updateAsset types to accept meta, \r\n                // but for now let's cast or assume the service handles specific fields roughly.\r\n                // The service likely spreads data, so 'meta' should pass through if we update the interface there.\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                await assetService.updateAsset(assetToEdit.id, payload as any);\r\n            } else {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                await assetService.addAsset(payload as any, profile.householdId, user.uid, household?.currency || 'USD');\r\n            }\r\n\r\n            setOpen?.(false);\r\n            if (!assetToEdit) form.reset();\r\n        } catch (error) {\r\n            console.error(\"Error saving asset:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return {\r\n        form,\r\n        loading,\r\n        submitAsset,\r\n        ASSET_TYPES,\r\n        members,\r\n        ASSET_META_SCHEMAS // Export to help UI determine fields\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\savings\\useSavings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\transactions\\AddTransactionModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\transactions\\TransactionList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\transactions\\transactionUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\transactions\\useAddTransaction.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\transactions\\useTransactionsList.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\AddTripExpenseModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4076,4079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4076,4079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":180,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6591,6594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6591,6594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\AddTripFundModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\AddTripModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":104,"column":104,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":107,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4148,4151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4148,4151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\AddTripReturnModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2032,2035],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2032,2035],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nD:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\AddTripReturnModal.tsx:116:90\n  114 |                                     defaultValue={form.getValues('currency')}\n  115 |                                     // eslint-disable-next-line react-hooks/incompatible-library\n> 116 |                                     value={!['USD', 'EUR', 'GBP', 'INR', 'AED'].includes(form.watch('currency')) && form.watch('currency') !== '' ? 'other' : form.watch('currency')}\n      |                                                                                          ^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  117 |                                 >\n  118 |                                     <SelectTrigger>\n  119 |                                         <SelectValue placeholder=\"Select currency\" />","line":116,"column":90,"nodeType":null,"endLine":116,"endColumn":94,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\TripAnalytics.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2495,2498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2495,2498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3166,3169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3166,3169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\TripDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\TripExpensesList.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[780,783],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[780,783],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\TripFundsList.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[747,750],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[747,750],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\TripReturnsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\components\\TripsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTrip.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTrip.ts:16:13\n  14 |         if (!user || !tripId) {\n  15 |             // eslint-disable-next-line react-hooks/set-state-in-effect\n> 16 |             setLoading(false);\n     |             ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  17 |             return;\n  18 |         }\n  19 |","line":16,"column":13,"nodeType":null,"endLine":16,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTripCalculations.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExpenseCategory' is defined but never used.","line":2,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'doc' is defined but never used.","line":3,"column":75,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":78},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useAuth' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo } from 'react';\r\nimport { TripExpense, TripFund, TripReturn, ExpenseCategory } from '../types';\r\nimport { Timestamp, collection, query, where, getDocs, addDoc, updateDoc, doc } from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport { useAuth } from '@/features/auth/AuthContext';\r\n\r\nexport function useTripCalculations(\r\n    funds: TripFund[],\r\n    expenses: TripExpense[],\r\n    returns: TripReturn[]\r\n) {\r\n    const totals = useMemo(() => {\r\n        const totalFunds = funds.reduce((sum, f) => sum + (f.baseAmount || 0), 0);\r\n        const totalExpenses = expenses.reduce((sum, e) => sum + (e.baseAmount || 0), 0);\r\n        const totalReturns = returns.reduce((sum, r) => sum + (r.baseAmount || 0), 0);\r\n        const netCost = totalExpenses - totalReturns;\r\n        const remainingFunds = totalFunds - netCost;\r\n\r\n        return { totalFunds, totalExpenses, totalReturns, netCost, remainingFunds };\r\n    }, [funds, expenses, returns]);\r\n\r\n    const byCategory = useMemo(() => {\r\n        const map: Record<string, number> = {};\r\n        expenses.forEach(e => {\r\n            map[e.category] = (map[e.category] || 0) + (e.baseAmount || 0);\r\n        });\r\n        return map;\r\n    }, [expenses]);\r\n\r\n    const byUser = useMemo(() => {\r\n        // Contribution vs Spend\r\n        // Spend is tracked by 'paidBy'\r\n        // Contribution is tracked by 'contributorId' in funds\r\n        const map: Record<string, { contributed: number; spent: number; received: number; balance: number }> = {};\r\n\r\n        funds.forEach(f => {\r\n            if (!map[f.contributorId]) map[f.contributorId] = { contributed: 0, spent: 0, received: 0, balance: 0 };\r\n            map[f.contributorId].contributed += (f.baseAmount || 0);\r\n        });\r\n\r\n        expenses.forEach(e => {\r\n            if (!map[e.paidBy]) map[e.paidBy] = { contributed: 0, spent: 0, received: 0, balance: 0 };\r\n            map[e.paidBy].spent += (e.baseAmount || 0);\r\n        });\r\n\r\n        returns.forEach(r => {\r\n            if (!map[r.receivedBy]) map[r.receivedBy] = { contributed: 0, spent: 0, received: 0, balance: 0 };\r\n            map[r.receivedBy].received += (r.baseAmount || 0);\r\n        });\r\n\r\n        // Calculate final balance\r\n        Object.keys(map).forEach(uid => {\r\n            const { contributed, spent, received } = map[uid];\r\n            // Balance logic:\r\n            // High positive means \"I put in more than I spent/got back\" (Owed money?)\r\n            // OR \"I have unused credit in the pot\".\r\n            // Typically: Balance = In - Out.\r\n            // Contributed (In) - Spent (Out) - Received (Out back to me)\r\n            map[uid].balance = contributed - spent - received;\r\n        });\r\n\r\n        return map;\r\n    }, [funds, expenses, returns]);\r\n\r\n    return { totals, byCategory, byUser };\r\n}\r\n\r\n\r\n// Integration Loop logic\r\n// In a real app this might be a background trigger, but here we export a function \r\n// that checks and updates the \"linked\" transaction.\r\n// It aggregates expenses by month-year and updates the corresponding transaction.\r\nexport async function syncTripExpensesToMainTracker(\r\n    tripId: string,\r\n    tripName: string,\r\n    expenses: TripExpense[],\r\n    userId: string, // current user doing the sync (presumably the editor)\r\n    householdId?: string\r\n) {\r\n    if (!householdId) return; // Only sync if part of a household/tracker context\r\n\r\n    // 1. Group expenses by Month-Year\r\n    const expensesByMonth: Record<string, number> = {};\r\n\r\n    expenses.forEach(e => {\r\n        const date = e.date.toDate();\r\n        const key = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`; // YYYY-MM\r\n        expensesByMonth[key] = (expensesByMonth[key] || 0) + (e.baseAmount || 0);\r\n    });\r\n\r\n    // 2. For each month, find or create the linked transaction\r\n    for (const [month, amount] of Object.entries(expensesByMonth)) {\r\n        // Check for existing linked transaction\r\n        const q = query(\r\n            collection(db, 'transactions'),\r\n            where('linkedTripId', '==', tripId),\r\n            where('month', '==', month),\r\n            where('type', '==', 'linkedTrip'), // ensuring uniqueness type tag\r\n            where('householdId', '==', householdId) // ensure we only touch this household's view\r\n        );\r\n\r\n        const snapshot = await getDocs(q);\r\n        const title = `${tripName}  ${month}`;\r\n\r\n        if (!snapshot.empty) {\r\n            // Update existing\r\n            const docRef = snapshot.docs[0].ref;\r\n            // Only update if amount changed significantly? Or always.\r\n            await updateDoc(docRef, {\r\n                amount: amount,\r\n                title: title,\r\n                updatedAt: Timestamp.now()\r\n            });\r\n        } else {\r\n            // Create new\r\n            if (amount > 0) {\r\n                await addDoc(collection(db, 'transactions'), {\r\n                    amount: amount,\r\n                    category: 'Travel', // Fixed category or passed in? Requirement said \"Category: Travel\"\r\n                    date: Timestamp.fromDate(new Date(`${month}-01`)), // First of month\r\n                    description: `Aggregated expenses for ${tripName}`,\r\n                    householdId: householdId,\r\n                    linkedTripId: tripId,\r\n                    month: month,\r\n                    title: title,\r\n                    type: 'linkedTrip',\r\n                    userId: userId, // The creating user\r\n                    isExpense: true,\r\n                    createdAt: Timestamp.now(),\r\n                    updatedAt: Timestamp.now()\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTripData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTripParticipants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTripSubcollection.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TripExpense' is defined but never used.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TripFund' is defined but never used.","line":16,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TripReturn' is defined but never used.","line":16,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":43},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTripSubcollection.ts:30:13\n  28 |     useEffect(() => {\n  29 |         if (!tripId || !user) {\n> 30 |             setData([]);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  31 |             setLoading(false);\n  32 |             return;\n  33 |         }","line":30,"column":13,"nodeType":null,"endLine":30,"endColumn":20},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'constraints'. Either include it or remove the dependency array.","line":57,"column":8,"nodeType":"ArrayExpression","endLine":57,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [tripId, user, subcollectionName, constraints]","fix":{"range":[1787,1820],"text":"[tripId, user, subcollectionName, constraints]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":85,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":88,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2176,2179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2176,2179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    collection,\r\n    query,\r\n    onSnapshot,\r\n    addDoc,\r\n    deleteDoc,\r\n    updateDoc,\r\n    doc,\r\n    orderBy,\r\n    Timestamp,\r\n    QueryConstraint\r\n} from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport { useAuth } from '@/features/auth/AuthContext';\r\nimport { TripExpense, TripFund, TripReturn } from '../types';\r\n\r\nexport function useSubcollection<T extends { id: string }>(\r\n    tripId: string,\r\n    subcollectionName: string,\r\n    constraints: QueryConstraint[] = []\r\n) {\r\n    const { user } = useAuth();\r\n    const [data, setData] = useState<T[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!tripId || !user) {\r\n            setData([]);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const q = query(\r\n            collection(db, 'trips', tripId, subcollectionName),\r\n            orderBy('date', 'desc'),\r\n            ...constraints\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            console.log(`[useSubcollection:${subcollectionName}] Snapshot received. Docs:`, snapshot.docs.length);\r\n            const items = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            })) as T[];\r\n            console.log(`[useSubcollection:${subcollectionName}] Parsed items:`, items);\r\n            setData(items);\r\n            setLoading(false);\r\n        }, (err) => {\r\n            console.error(`Error fetching ${subcollectionName}:`, err);\r\n            setError(`Failed to load ${subcollectionName}`);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, [tripId, user, subcollectionName]);\r\n\r\n    const add = async (item: Omit<T, 'id'>) => {\r\n        if (!tripId) return;\r\n        await addDoc(collection(db, 'trips', tripId, subcollectionName), item);\r\n    };\r\n\r\n    const update = async (id: string, updates: Partial<T>) => {\r\n        if (!tripId) return;\r\n        await updateDoc(doc(db, 'trips', tripId, subcollectionName, id), updates as any);\r\n    };\r\n\r\n    const remove = async (id: string) => {\r\n        if (!tripId) return;\r\n        await deleteDoc(doc(db, 'trips', tripId, subcollectionName, id));\r\n    };\r\n\r\n    return { data, loading, error, add, update, remove };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTrips.ts","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nD:\\projects\\family-expense-tracker\\src\\features\\trips\\hooks\\useTrips.ts:25:13\n  23 |     useEffect(() => {\n  24 |         if (!user) {\n> 25 |             setTrips([]);\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  26 |             setLoading(false);\n  27 |             return;\n  28 |         }","line":25,"column":13,"nodeType":null,"endLine":25,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    collection,\r\n    query,\r\n    where,\r\n    onSnapshot,\r\n    addDoc,\r\n    deleteDoc,\r\n    doc,\r\n    Timestamp,\r\n    orderBy\r\n} from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport { useAuth } from '@/features/auth/AuthContext';\r\nimport { Trip } from '../types';\r\n\r\nexport function useTrips() {\r\n    const { user } = useAuth();\r\n    const [trips, setTrips] = useState<Trip[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            setTrips([]);\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const q = query(\r\n            collection(db, 'trips'),\r\n            where('participantIds', 'array-contains', user.uid),\r\n            orderBy('startDate', 'desc')\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const tripData = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            })) as Trip[];\r\n            setTrips(tripData);\r\n            setLoading(false);\r\n        }, (err) => {\r\n            console.error(\"Error fetching trips:\", err);\r\n            setError(\"Failed to load trips.\");\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, [user]);\r\n\r\n\r\n\r\n    const createTrip = async (data: Omit<Trip, 'id' | 'createdAt' | 'createdBy'>) => {\r\n        if (!user) throw new Error(\"User not authenticated\");\r\n\r\n        const tripData = {\r\n            ...data,\r\n            createdBy: user.uid,\r\n            createdAt: Timestamp.now(),\r\n            participantIds: Array.from(new Set([...data.participantIds, user.uid]))\r\n        };\r\n\r\n        await addDoc(collection(db, 'trips'), tripData);\r\n    };\r\n\r\n    const removeTrip = async (tripId: string) => {\r\n        // TODO: cleanup subcollections? Firestore doesn't auto-delete subcollections.\r\n        // Client-side delete of subcollections is expensive. \r\n        // Usually we'd use a cloud function or ignore them.\r\n        // Given \"No Cloud Functions\", we might leave them orphaned or do a batch delete if small.\r\n        // For now, simple delete.\r\n        await deleteDoc(doc(db, 'trips', tripId));\r\n    };\r\n\r\n    return { trips, loading, error, createTrip, removeTrip };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\features\\trips\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\api\\assets.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Asset' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '@/lib/firebase';\r\nimport { addDoc, collection, serverTimestamp, Timestamp, updateDoc, doc } from 'firebase/firestore';\r\nimport { Asset } from '@/types';\r\n\r\nexport interface AssetData {\r\n    name: string;\r\n    type: string;\r\n    amountInvested: number;\r\n    currentValue: number;\r\n    buyDate: Date;\r\n    source?: string;\r\n    ownerIds?: string[];\r\n}\r\n\r\nexport const assetService = {\r\n    async addAsset(data: AssetData, householdId: string, userId: string, currency: string) {\r\n        await addDoc(collection(db, 'assets'), {\r\n            ...data,\r\n            buyDate: Timestamp.fromDate(data.buyDate),\r\n            householdId,\r\n            ownerUserId: userId, // Default owner (creator) or primary owner\r\n            currency,\r\n            isEncrypted: false,\r\n            attachments: [],\r\n            meta: {},\r\n            createdAt: serverTimestamp(),\r\n        });\r\n    },\r\n\r\n    async updateAsset(id: string, data: AssetData) {\r\n        await updateDoc(doc(db, 'assets', id), {\r\n            ...data,\r\n            buyDate: Timestamp.fromDate(data.buyDate),\r\n        });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\api\\budgets.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\api\\households.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":50,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1894,1897],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1894,1897],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '@/lib/firebase';\r\nimport { doc, setDoc, updateDoc, serverTimestamp, collection, query, where, getDocs, arrayUnion } from 'firebase/firestore';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { generateHouseholdKey, exportKey } from '@/lib/crypto';\r\nimport { Household } from '@/types';\r\nimport { User } from 'firebase/auth';\r\n\r\nexport interface CreateHouseholdData {\r\n    name: string;\r\n    currency: string;\r\n}\r\n\r\nexport const householdService = {\r\n    /**\r\n     * Checks if a household with the given name exists (case-insensitive preferred).\r\n     * Returns the household document if found, otherwise null.\r\n     */\r\n    async checkAvailability(name: string): Promise<Household | null> {\r\n        const queries = [\r\n            query(collection(db, 'households'), where('name_lower', '==', name.toLowerCase())),\r\n            query(collection(db, 'households'), where('name', '==', name))\r\n        ];\r\n\r\n        const results = await Promise.all(queries.map(q => getDocs(q)));\r\n\r\n        // Find first non-empty result\r\n        for (const snap of results) {\r\n            if (!snap.empty) {\r\n                const docSnap = snap.docs[0];\r\n                return { id: docSnap.id, ...docSnap.data() } as Household;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * Creates a new household and updates the user's profile to be an admin of it.\r\n     */\r\n    async createHousehold(data: CreateHouseholdData, user: User): Promise<string> {\r\n        const householdId = uuidv4();\r\n        const key = await generateHouseholdKey();\r\n        const exportedKey = await exportKey(key);\r\n\r\n        const newHousehold: Household = {\r\n            id: householdId,\r\n            name: data.name,\r\n            name_lower: data.name.toLowerCase(),\r\n            currency: data.currency,\r\n            memberIds: [user.uid],\r\n            createdAt: serverTimestamp() as any,\r\n            encryptedKeys: {\r\n                [user.uid]: exportedKey\r\n            }\r\n        };\r\n\r\n        await setDoc(doc(db, 'households', householdId), newHousehold);\r\n\r\n        await updateDoc(doc(db, 'users', user.uid), {\r\n            householdId: householdId,\r\n            role: 'admin'\r\n        });\r\n\r\n        return householdId;\r\n    },\r\n\r\n    /**\r\n     * Joins an existing household and updates the user's profile.\r\n     */\r\n    async joinHousehold(householdId: string, user: User): Promise<void> {\r\n        // Add user to household.memberIds\r\n        await updateDoc(doc(db, 'households', householdId), {\r\n            memberIds: arrayUnion(user.uid)\r\n        });\r\n\r\n        // Update User Profile\r\n        await updateDoc(doc(db, 'users', user.uid), {\r\n            householdId: householdId,\r\n            role: 'user'\r\n        });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\api\\transactions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Transaction' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from '@/lib/firebase';\r\nimport { addDoc, collection, serverTimestamp, Timestamp, updateDoc, doc } from 'firebase/firestore';\r\nimport { Transaction } from '@/types';\r\n\r\nexport interface TransactionData {\r\n    type: 'income' | 'expense';\r\n    amount: number;\r\n    currency: string;\r\n    categoryId: string;\r\n    categoryName: string;\r\n    description: string;\r\n    date: Date;\r\n    spentBy?: string;\r\n    isPersonal?: boolean;\r\n}\r\n\r\nexport const transactionService = {\r\n    async addTransaction(data: TransactionData, householdId: string, userId: string) {\r\n        await addDoc(collection(db, 'transactions'), {\r\n            ...data,\r\n            date: Timestamp.fromDate(data.date),\r\n            householdId,\r\n            userId,\r\n            spentBy: data.spentBy || userId, // Default to creator if not specified\r\n            isPersonal: data.isPersonal || false,\r\n            attachments: [],\r\n            isRecurring: false,\r\n            createdAt: serverTimestamp(),\r\n        });\r\n    },\r\n\r\n    async updateTransaction(id: string, data: TransactionData) {\r\n        await updateDoc(doc(db, 'transactions', id), {\r\n            ...data,\r\n            date: Timestamp.fromDate(data.date),\r\n        });\r\n    },\r\n\r\n    async addRecurringTransaction(data: TransactionData, householdId: string, interval: 'weekly' | 'monthly' | 'yearly') {\r\n        const nextRun = new Date(data.date);\r\n        if (interval === 'weekly') nextRun.setDate(nextRun.getDate() + 7);\r\n        if (interval === 'monthly') nextRun.setMonth(nextRun.getMonth() + 1);\r\n        if (interval === 'yearly') nextRun.setFullYear(nextRun.getFullYear() + 1);\r\n\r\n        await addDoc(collection(db, 'recurring_transactions'), {\r\n            householdId,\r\n            description: data.description,\r\n            amount: data.amount,\r\n            type: data.type,\r\n            categoryId: data.categoryId,\r\n            interval,\r\n            nextRunDate: Timestamp.fromDate(nextRun),\r\n            active: true,\r\n            createdAt: serverTimestamp()\r\n        });\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\crypto.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1111,1114],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1111,1114],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1442,1445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1442,1445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Web Crypto API Utilities for Client-Side Encryption\r\n\r\nexport async function generateHouseholdKey(): Promise<CryptoKey> {\r\n    return window.crypto.subtle.generateKey(\r\n        {\r\n            name: 'AES-GCM',\r\n            length: 256,\r\n        },\r\n        true,\r\n        ['encrypt', 'decrypt']\r\n    );\r\n}\r\n\r\nexport async function exportKey(key: CryptoKey): Promise<string> {\r\n    const exported = await window.crypto.subtle.exportKey('jwk', key);\r\n    return JSON.stringify(exported);\r\n}\r\n\r\nexport async function importKey(jwkJson: string): Promise<CryptoKey> {\r\n    const jwk = JSON.parse(jwkJson);\r\n    return window.crypto.subtle.importKey(\r\n        'jwk',\r\n        jwk,\r\n        { name: 'AES-GCM', length: 256 },\r\n        true,\r\n        ['encrypt', 'decrypt']\r\n    );\r\n}\r\n\r\nexport async function encryptData(\r\n    data: BufferSource,\r\n    key: CryptoKey\r\n): Promise<{ ciphertext: ArrayBuffer; iv: Uint8Array }> {\r\n    const iv = window.crypto.getRandomValues(new Uint8Array(12));\r\n    const ciphertext = await window.crypto.subtle.encrypt(\r\n        {\r\n            name: 'AES-GCM',\r\n            iv: iv as any,\r\n        },\r\n        key,\r\n        data\r\n    );\r\n    return { ciphertext, iv };\r\n}\r\n\r\nexport async function decryptData(\r\n    ciphertext: BufferSource,\r\n    iv: Uint8Array,\r\n    key: CryptoKey\r\n): Promise<ArrayBuffer> {\r\n    return window.crypto.subtle.decrypt(\r\n        {\r\n            name: 'AES-GCM',\r\n            iv: iv as any,\r\n        },\r\n        key,\r\n        ciphertext\r\n    );\r\n}\r\n\r\n// Helper to encrypt a File/Blob\r\nexport async function encryptFile(file: File, key: CryptoKey) {\r\n    const buffer = await file.arrayBuffer();\r\n    const { ciphertext, iv } = await encryptData(buffer, key);\r\n    return {\r\n        encryptedBlob: new Blob([ciphertext], { type: 'application/octet-stream' }),\r\n        iv: Array.from(iv), // Convert to array for easier storage/transport\r\n    };\r\n}\r\n\r\n// Helper to decrypt to Blob\r\nexport async function decryptFile(\r\n    encryptedBlob: Blob,\r\n    iv: number[],\r\n    key: CryptoKey,\r\n    originalMimeType: string\r\n): Promise<Blob> {\r\n    const buffer = await encryptedBlob.arrayBuffer();\r\n    const decryptedBuffer = await decryptData(buffer, new Uint8Array(iv), key);\r\n    return new Blob([decryptedBuffer], { type: originalMimeType });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\firebase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\firestoreUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CollectionReference' is defined but never used.","line":1,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DocumentData' is defined but never used.","line":1,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":86}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { collection, query, where, QueryConstraint, CollectionReference, DocumentData } from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\n\r\ninterface SecureQueryOptions {\r\n    collectionName: string;\r\n    householdId: string | undefined;\r\n    userId?: string; // Optional: Provide only if you want to restrict to a specific user\r\n    constraints?: QueryConstraint[];\r\n}\r\n\r\n/**\r\n * Creates a Firestore query that guarantees household isolation.\r\n * Optionally filters by userId if provided.\r\n */\r\nexport function createSecureQuery({ collectionName, householdId, userId, constraints = [] }: SecureQueryOptions) {\r\n    if (!householdId) {\r\n        throw new Error(\"Secure query requires householdId to ensure data isolation.\");\r\n    }\r\n\r\n    const baseConstraints = [where('householdId', '==', householdId)];\r\n\r\n    // Only add userId filter if strictly requested\r\n    if (userId) {\r\n        baseConstraints.push(where('userId', '==', userId));\r\n    }\r\n\r\n    return query(\r\n        collection(db, collectionName),\r\n        ...baseConstraints,\r\n        ...constraints\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\lib\\utils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[935,938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[935,938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[990,993],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[990,993],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1089,1092],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1089,1092],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type ClassValue, clsx } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\nimport { Timestamp } from 'firebase/firestore';\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatCurrency(amount: number, currency: string = 'USD'): string {\r\n    return new Intl.NumberFormat('en-US', {\r\n        style: 'currency',\r\n        currency: currency,\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0,\r\n    }).format(amount);\r\n}\r\n\r\n/**\r\n * Safely converts various date formats (Firestore Timestamp, string, number, Date) \r\n * into a standard JavaScript Date object.\r\n */\r\nexport function toJsDate(date: Date | Timestamp | string | number | unknown): Date {\r\n    if (!date) return new Date();\r\n\r\n    // Check for Firestore Timestamp-like object (has toDate method)\r\n    if (typeof date === 'object' && date !== null && 'toDate' in date && typeof (date as any).toDate === 'function') {\r\n        return (date as any).toDate();\r\n    }\r\n\r\n    if (date instanceof Date) return date;\r\n\r\n    return new Date(date as any);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\scripts\\seed.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cert' is defined but never used.","line":11,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2702,2705],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2702,2705],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Run this script to seed the database.\r\n * Usage: npx tsx src/scripts/seed.ts\r\n * \r\n * Prerequisites:\r\n * 1. Set GOOGLE_APPLICATION_CREDENTIALS to your service account key path\r\n *    OR log in via `gcloud auth application-default login`\r\n * 2. Ensure .env.local has FIREBASE_PROJECT_ID\r\n */\r\n\r\nimport { initializeApp, cert, getApps } from 'firebase-admin/app';\r\nimport { getAuth } from 'firebase-admin/auth';\r\nimport { getFirestore, Timestamp } from 'firebase-admin/firestore';\r\nimport * as dotenv from 'dotenv';\r\n\r\ndotenv.config({ path: '.env.local' });\r\n\r\n// Initialize Admin SDK\r\n// Note: In a real environment, you'd use a service account.\r\n// For local dev with emulators, simple init is enough.\r\nconst app = !getApps().length\r\n    ? initializeApp({\r\n        projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || 'demo-project',\r\n    })\r\n    : getApps()[0];\r\n\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\nconst SEED_USERS = [\r\n    {\r\n        uid: 'user-husband-1',\r\n        email: 'husband@example.com',\r\n        password: 'password123',\r\n        displayName: 'John Doe',\r\n    },\r\n    {\r\n        uid: 'user-wife-1',\r\n        email: 'wife@example.com',\r\n        password: 'password123',\r\n        displayName: 'Jane Doe',\r\n    },\r\n    {\r\n        uid: 'user-admin-1',\r\n        email: 'admin@example.com',\r\n        password: 'password123',\r\n        displayName: 'Admin User',\r\n        role: 'admin',\r\n    },\r\n];\r\n\r\nasync function seed() {\r\n    console.log(' Starting seed...');\r\n\r\n    // 1. Create Users\r\n    for (const user of SEED_USERS) {\r\n        try {\r\n            await auth.deleteUser(user.uid).catch(() => { }); // Cleanup existing\r\n            await auth.createUser({\r\n                uid: user.uid,\r\n                email: user.email,\r\n                password: user.password,\r\n                displayName: user.displayName,\r\n            });\r\n            console.log(`Created user: ${user.email}`);\r\n        } catch (e) {\r\n            console.warn(`Error creating auth user ${user.email}:`, e);\r\n        }\r\n    }\r\n\r\n    // 2. Create Household\r\n    const householdId = 'household-demo-1';\r\n    const householdRef = db.collection('households').doc(householdId);\r\n    await householdRef.set({\r\n        name: 'Doe Family',\r\n        memberIds: ['user-husband-1', 'user-wife-1'],\r\n        currency: 'USD',\r\n        createdAt: Timestamp.now(),\r\n    });\r\n    console.log('Created Household');\r\n\r\n    // 3. User Profiles linked to Household\r\n    for (const user of SEED_USERS) {\r\n        await db.collection('users').doc(user.uid).set({\r\n            uid: user.uid,\r\n            email: user.email,\r\n            displayName: user.displayName,\r\n            role: (user as any).role || 'user',\r\n            householdId: user.role === 'admin' ? null : householdId,\r\n            createdAt: Timestamp.now(),\r\n            lastSeen: Timestamp.now(),\r\n        });\r\n    }\r\n\r\n    // 4. Categories\r\n    const categories = [\r\n        { id: 'cat-salary', name: 'Salary', type: 'income', color: '#10b981' },\r\n        { id: 'cat-rent', name: 'Rent', type: 'expense', color: '#ef4444' },\r\n        { id: 'cat-food', name: 'Food & Groceries', type: 'expense', color: '#f59e0b' },\r\n        { id: 'cat-invest', name: 'Investments', type: 'expense', color: '#3b82f6' },\r\n    ];\r\n\r\n    for (const cat of categories) {\r\n        await db.collection('categories').doc(cat.id).set({\r\n            ...cat,\r\n            householdId,\r\n        });\r\n    }\r\n\r\n    // 5. Transactions (Sample)\r\n    const transactions = [\r\n        {\r\n            description: 'Monthly Salary',\r\n            amount: 5000,\r\n            type: 'income',\r\n            categoryId: 'cat-salary',\r\n            userId: 'user-husband-1',\r\n            date: new Date('2024-01-01'),\r\n            isRecurring: true,\r\n        },\r\n        {\r\n            description: 'Rent Payment',\r\n            amount: 1500,\r\n            type: 'expense',\r\n            categoryId: 'cat-rent',\r\n            userId: 'user-husband-1',\r\n            date: new Date('2024-01-02'),\r\n            isRecurring: true,\r\n        },\r\n        {\r\n            description: 'Grocery Run',\r\n            amount: 150.50,\r\n            type: 'expense',\r\n            categoryId: 'cat-food',\r\n            userId: 'user-wife-1',\r\n            date: new Date('2024-01-05'),\r\n        },\r\n    ];\r\n\r\n    for (const tx of transactions) {\r\n        await db.collection('transactions').add({\r\n            ...tx,\r\n            householdId,\r\n            date: Timestamp.fromDate(tx.date),\r\n            attachments: [],\r\n        });\r\n    }\r\n\r\n    console.log(' Seed complete!');\r\n}\r\n\r\nseed()\r\n    .then(() => process.exit(0))\r\n    .catch((err) => {\r\n        console.error(err);\r\n        process.exit(1);\r\n    });\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\projects\\family-expense-tracker\\src\\types\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":150,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4242,4245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4242,4245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Timestamp, FieldValue } from 'firebase/firestore';\r\n\r\nexport type Role = 'admin' | 'user';\r\n\r\nexport * from '../features/trips/types';\r\n\r\nexport interface UserProfile {\r\n    uid: string;\r\n    email: string | null;\r\n    displayName: string | null;\r\n    photoURL: string | null;\r\n    role: Role;\r\n    householdId: string | null;\r\n    createdAt: Timestamp | FieldValue;\r\n    lastSeen: Timestamp | FieldValue;\r\n}\r\n\r\n// ...\r\n\r\nexport type GoalCategory = 'short-term' | 'medium-term' | 'long-term';\r\nexport type GoalPriority = 'high' | 'medium' | 'low';\r\nexport type RiskTolerance = 'conservative' | 'moderate' | 'aggressive';\r\nexport type FeasibilityStatus = 'feasible' | 'conditionally-feasible' | 'not-feasible';\r\n\r\nexport interface FinancialGoal {\r\n    id: string;\r\n    userId: string;\r\n    householdId: string;\r\n    name: string;\r\n    targetAmount: number;\r\n    currentAmount: number;\r\n    deadline?: Date;\r\n    color: string;\r\n    icon: string;\r\n    createdAt?: Timestamp | FieldValue;\r\n\r\n    // Planning Fields\r\n    category?: GoalCategory;\r\n    priority?: GoalPriority;\r\n    monthlyContribution?: number;\r\n    inflationRate?: number;\r\n    fundingSourceIds?: string[];\r\n    riskLevel?: RiskTolerance;\r\n\r\n    // Feasibility Output\r\n    feasibilityStatus?: FeasibilityStatus;\r\n    feasibilityNote?: string;\r\n}\r\n\r\nexport interface FinancialProfile {\r\n    householdId: string;\r\n    currency: string;\r\n    riskAllocation: {\r\n        conservative: number; // % (0-100)\r\n        moderate: number;\r\n        aggressive: number;\r\n    };\r\n    savingsCapacity: { userId: string; amount: number }[];\r\n    totalMonthlyIncome: number;\r\n    monthlyCommitments: number;\r\n    variableCommitments: number;\r\n    incomeGrowthRate?: number; // Annual %\r\n    annualBonus?: number; // Annual 1-time amount\r\n    income: {\r\n        userId: string;\r\n        grossMonthly: number;\r\n        netMonthly: number;\r\n    }[];\r\n    lastUpdated: Timestamp;\r\n}\r\n\r\nexport interface Household {\r\n    id: string;\r\n    name: string;\r\n    memberIds: string[];\r\n    currency: string;\r\n    createdAt: Timestamp;\r\n    // Encrypted symmetric key (AES-GCM) for the household, keyed by user ID\r\n    // Each user has a copy of the key encrypted with their own KEK (derived from password or auth)\r\n    encryptedKeys?: Record<string, string>;\r\n    name_lower?: string; // Normalized name for case-insensitive search\r\n}\r\n\r\nexport interface Transaction {\r\n    id: string;\r\n    householdId: string;\r\n    userId: string;\r\n    type: 'income' | 'expense';\r\n    amount: number;\r\n    currency: string;\r\n    categoryId: string;\r\n    categoryName?: string; // Denormalized for easier display\r\n    date: Timestamp;\r\n    description: string;\r\n    paymentMethodId?: string;\r\n    isRecurring: boolean;\r\n    recurrenceRule?: string;\r\n    attachments: Attachment[];\r\n    spentBy?: string; // userId of the person who spent the money\r\n    isPersonal?: boolean; // If true, this transaction is only for the spender\r\n}\r\n\r\nexport interface RecurringTransaction {\r\n    id: string;\r\n    householdId: string;\r\n    description: string;\r\n    amount: number;\r\n    type: 'income' | 'expense';\r\n    categoryId: string;\r\n    interval: 'weekly' | 'monthly' | 'yearly';\r\n    nextRunDate: Timestamp;\r\n    active: boolean;\r\n    createdAt: Timestamp;\r\n}\r\n\r\n\r\n\r\nexport interface Attachment {\r\n    id: string;\r\n    url: string;\r\n    mimeType: string;\r\n    name: string;\r\n    isEncrypted: boolean;\r\n}\r\n\r\nexport interface Category {\r\n    id: string;\r\n    householdId: string;\r\n    name: string;\r\n    type: 'income' | 'expense';\r\n    color: string;\r\n    budgetMonthly?: number;\r\n    budgets?: Record<string, number>; // { \"2025\": monthlyAmount }\r\n    userBudgets?: Record<string, number>; // { userId: monthlyAmount }\r\n}\r\n\r\nexport interface Asset {\r\n    id: string;\r\n    householdId: string;\r\n    ownerUserId: string;\r\n    type: 'Gold' | 'FD' | 'MonthlySaving' | 'Property' | 'Stock' | 'Crypto' | 'Jewellery' | 'Bank';\r\n    name: string;\r\n    amountInvested: number;\r\n    currentValue?: number;\r\n    currency: string;\r\n    buyDate: Timestamp;\r\n    notes?: string;\r\n    isEncrypted: boolean; // If true, sensitive fields like photos/notes are client-side encrypted\r\n    attachments: Attachment[];\r\n    meta: Record<string, any>; // Flexible for different asset types (gold weight, karat, etc)\r\n    source?: string;\r\n    ownerIds?: string[]; // Multiple owners support\r\n}\r\n","usedDeprecatedRules":[]}]